<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
  <script src="pexels.js"></script>
  <link rel="stylesheet" href="style.css" />
  <title>AI Image Generator using Pexels API</title>
  <link rel="icon" href="logo.jpg" type="image/png">
</head>

<body class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white">
  <nav class="w-full py-4 backdrop-blur bg-white/5 shadow-md border-b border-white/10">
    <h2 class="text-center text-2xl font-bold tracking-wide drop-shadow">
      AI Image Generator
    </h2>

  <div class="max-w-5xl mx-auto px-4 mt-12">
    <div class="text-center mb-10">
      <h1 class="text-4xl md:text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 drop-shadow-lg">
        Generate Stunning Images in Seconds
      </h1>
      <p class="text-lg text-gray-300">
        Type what you want and choose the size. The generator will find the best matches from Pexels.
      </p>
    </div>

    <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 shadow-xl">
      <div class="grid gap-4">
        <label class="text-gray-300 font-medium">Description / Keyword</label>
        <textarea id="text" class="input-style bg-gray-900/50 border border-gray-600 text-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-indigo-500" placeholder="Example: mountains, city night, cute dog, superhero..."></textarea>

        <label class="text-gray-300 font-medium">Image Size</label>
        <select id="sizeSelect" class="input-style bg-gray-900/50 border border-gray-600 text-gray-200 rounded-xl p-3">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>

        <label class="text-gray-300 font-medium">Number of Images</label>
        <select id="numImagesSelect" class="input-style bg-gray-900/50 border border-gray-600 text-gray-200 rounded-xl p-3"></select>
      </div>

      <div class="mt-6 text-right">
        <button id="btn" class="px-6 py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-pink-500 hover:from-indigo-400 hover:to-pink-400 text-white font-semibold shadow-lg hover:shadow-2xl transition-transform transform hover:-translate-y-1">
          Generate
        </button>
      </div>

      <div id="loading" class="hidden flex justify-center items-center mt-10">
        <svg class="animate-spin h-12 w-12 text-gray-300" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647zm11-2.647A7.962 7.962 0 0120 12h-4c0 3.042-1.135 5.824-3 7.938l-3-2.647z">
          </path>
        </svg>
      </div>

      <div id="image" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-10"></div>
    </div>
  </div>

  <footer class="text-center mt-16 py-6 border-t border-white/20">
    <p class="text-sm text-gray-300">
      Made with <span class="text-red-500">❤️</span> by 
      <a href="https://github.com/UtkarshSrivastav09" target="_blank" class="font-semibold text-indigo-400 hover:text-indigo-300"> @Utkarsh Srivastav </a>
    </p>
  </footer>


  <script>
    const text = document.getElementById("text");
    const image = document.getElementById("image");
    const btn = document.getElementById("btn");
    const numImagesSelect = document.getElementById("numImagesSelect");
    const sizeSelect = document.getElementById("sizeSelect");
    const loadingSpinner = document.getElementById("loading");

    // populate number of images dropdown
    for (let i = 1; i <= 10; i++) {
      const option = document.createElement("option");
      option.value = i;
      option.textContent = i;
      numImagesSelect.appendChild(option);
    }

    let numImages = parseInt(numImagesSelect.value);
    let sizeOption = sizeSelect.value;

    numImagesSelect.addEventListener("change", function () {
      numImages = parseInt(numImagesSelect.value);
    });

    sizeSelect.addEventListener("change", function () {
      sizeOption = sizeSelect.value;
    });

    btn.addEventListener("click", async function () {
  if (text.value.trim() === "") {
    alert("Please enter a value");
    return;
  }

  loadingSpinner.classList.remove("hidden");
  btn.disabled = true;
  image.innerHTML = ""; // clear previous images

  try {
    const photos = await searchImages(text.value, numImages);

    if (!photos || photos.length === 0) {
      alert("No images found for this description. Try another keyword!");
      return;
    }

    photos.forEach(photo => {
  const img = document.createElement("img");

  let imgUrl;

if (sizeOption === "small") {
  imgUrl = photo.src.small || photo.src.tiny;
} else if (sizeOption === "medium") {
  imgUrl = photo.src.medium || photo.src.large;
} else if (sizeOption === "large") {
  imgUrl = photo.src.large2x || photo.src.original;
}

img.src = imgUrl;


  img.alt = photo.alt || "image";
  img.classList.add(
    "w-full",
    "h-auto",
    "rounded-lg",
    "shadow-lg",
    "hover:shadow-2xl",
    "transition",
    "duration-500",
    "ease-in-out",
    "transform",
    "hover:-translate-y-1",
    "hover:scale-103"
  );

  image.appendChild(img);

  img.addEventListener("dblclick", () => {
    const link = document.createElement("a");
    link.href = photo.src.original;
    link.download = text.value.split(" ").join("_") + ".jpg";
    link.click();
  });
});

  } catch (error) {
    console.error(error);
    alert("Error fetching images!");
  } finally {
    loadingSpinner.classList.add("hidden");
    btn.disabled = false;
  }
});

  </script>
</body>

</html>
